{"version":3,"file":"NodeLoader.esm.js","sources":["../src/NodeLoader.js"],"sourcesContent":["//function node\nimport functionNode from '@node-red/nodes/core/function/10-function'\nimport switchNode from '@node-red/nodes/core/function/10-switch'\nimport changeNode from '@node-red/nodes/core/function/15-change'\nimport rangeNode from '@node-red/nodes/core/function/16-range'\nimport templateNode from '@node-red/nodes/core/function/80-template'\nimport delayNode from '@node-red/nodes/core/function/89-delay'\nimport triggerNode from '@node-red/nodes/core/function/89-trigger'\nimport execNode from '@node-red/nodes/core/function/90-exec'\nimport rbeNode from '@node-red/nodes/core/function/rbe'\n\n//common node\nimport injectNode from '@node-red/nodes/core/common/20-inject'\nimport debugNode from '@node-red/nodes/core/common/21-debug'\nimport completeNode from '@node-red/nodes/core/common/24-complete'\nimport catchNode from '@node-red/nodes/core/common/25-catch'\nimport statusNode from '@node-red/nodes/core/common/25-status'\nimport linkNode from '@node-red/nodes/core/common/60-link'\nimport commentNode from '@node-red/nodes/core/common/90-comment'\nimport unknownNode from '@node-red/nodes/core/common/98-unknown'\n\n//network node\nimport tlsNode from '@node-red/nodes/core/network/05-tls'\nimport httpproxyNode from '@node-red/nodes/core/network/06-httpproxy'\nimport mqttNode from '@node-red/nodes/core/network/10-mqtt'\nimport httpinNode from '@node-red/nodes/core/network/21-httpin'\nimport httprequestNode from '@node-red/nodes/core/network/21-httprequest'\nimport websocketNode from '@node-red/nodes/core/network/22-websocket'\nimport tcpinNode from '@node-red/nodes/core/network/31-tcpin'\nimport udpNode from '@node-red/nodes/core/network/32-udp'\n\n//parser node\nimport csvNode from '@node-red/nodes/core/parsers/70-CSV'\nimport htmlNode from '@node-red/nodes/core/parsers/70-HTML'\nimport jsonNode from '@node-red/nodes/core/parsers/70-JSON'\nimport xmlNode from '@node-red/nodes/core/parsers/70-XML'\nimport yamlNode from '@node-red/nodes/core/parsers/70-YAML'\n\n//sequence node\nimport splitNode from '@node-red/nodes/core/sequence/17-split'\nimport sortNode from '@node-red/nodes/core/sequence/18-sort'\nimport batchNode from '@node-red/nodes/core/sequence/19-batch'\n\n//storage node\nimport fileNode from '@node-red/nodes/core/storage/10-file'\nimport watchNode from '@node-red/nodes/core/storage/23-watch'\n\nimport _ from 'lodash'\n\n\n\n\nexport class NodeLoader{\n    nodeDict = {}\n    constructor(){\n        this.nodeDict = {\n            function: functionNode,\n            switch: switchNode,\n            change: changeNode,\n            range: rangeNode,\n            template: templateNode,\n            delay: delayNode,\n            trigger: triggerNode,\n            exec: execNode,\n            rbe: rbeNode,\n            inject: injectNode,\n            debug: debugNode,\n            complete: completeNode,\n            catch: catchNode,\n            status: statusNode,\n            \"link in\": linkNode,\n            \"link out\": linkNode,\n            \"link call\": linkNode,\n            comment: commentNode,\n            unknown: unknownNode,\n            \"tls-config\": tlsNode,\n            \"http proxy\": httpproxyNode,\n            \"mqtt-broker\": mqttNode,\n            \"mqtt in\": mqttNode,\n            \"mqtt out\": mqttNode,\n            \"http request\": httprequestNode,\n            \"http response\": httpinNode,\n            \"http in\": httpinNode,\n            \"websocket-listener\": websocketNode,\n            \"websocket-client\": websocketNode,\n            \"websocket out\": websocketNode,\n            \"websocket in\": websocketNode,\n            \"tcp in\": tcpinNode,\n            \"tcp out\": tcpinNode,\n            \"tcp request\": tcpinNode,\n            \"udp in\": udpNode,\n            \"udp out\": udpNode,\n            csv: csvNode,\n            html: htmlNode,\n            json: jsonNode,\n            xml: xmlNode,\n            yaml: yamlNode,\n            split: splitNode,\n            join: splitNode,\n            sort: sortNode,\n            batch: batchNode,\n            file: fileNode,\n            \"file in\": fileNode,\n            watch: watchNode,\n        };\n    }\n    \n    // getNodeArray(fileString)\n    // {\n    //     const flowData = JSON.parse(fileString);\n    //     const condFunc = _.cond([\n    //         [\n    //             (a) => _.gt(a.length, 0),\n    //             (a) => console.info(`[Node Loader] Missing custom node: ${a}`),\n    //         ],\n    //     ]);\n\n    //     const checkInDict = (node) => (node in this.nodeDict);\n    //     const nodeArray = _.chain(flowData)\n    //         .map((node) => node.type)\n    //         .uniq()\n    //         .filter(checkInDict)\n    //         .uniq()\n    //         .value()\n    //         .map((node) => (this.nodeDict[node]));\n\n    //     // console.log(nodeArray)\n\n    //     const missingNode = _.chain(flowData)\n    //         .map((node) => node.type)\n    //         .uniq()\n    //         .filter(_.negate(checkInDict))\n    //         .uniq()\n    //         .value();\n\n    //     condFunc(missingNode);\n    //     return _.uniq(nodeArray);\n    // }\n    \n    getNodeArray(fileString)\n    {\n        const flowData = JSON.parse(fileString);\n\n    // if (missingNode.length > 0) {\n    //     console.info(`[Node Loader] Missing custom node: ${missingNode}`)\n    // }\n\n    const originalNodeTypeArray = flowData.map((node) => (node.type))\n    const uniqleNodeTypeArray = [...new Set(originalNodeTypeArray)]\n    // console.log('uni node',uniqleNodeArray)\n    let nodeArray = []\n    uniqleNodeTypeArray.forEach((node) => {\n        if (nodeDict.hasOwnProperty(node)) {\n            nodeArray.push(nodeDict[node])\n            // console.log('node type: ',node,nodeDict[node])\n        }\n        else {\n            console.info(`[Node Loader WARNING] ${node} cannot find!!`)\n        }\n    }\n    )\n    // console.log(originalNodeTypeArray,uniqleNodeTypeArray)\n    // const uniqleNodeArray = [...new Set(nodeArray)]\n    // return uniqleNodeArray\n    // console.log(nodeArray,uniqleNodeArray)\n\n    return [...new Set(nodeArray)]\n    }\n};\n\n// module.exports = NodeLoader"],"names":["NodeLoader","nodeDict","functionNode","switchNode","change","changeNode","range","rangeNode","template","templateNode","delay","delayNode","trigger","triggerNode","exec","execNode","rbe","rbeNode","inject","injectNode","debug","debugNode","complete","completeNode","catchNode","status","statusNode","linkNode","comment","commentNode","unknown","unknownNode","tlsNode","httpproxyNode","mqttNode","httprequestNode","httpinNode","websocketNode","tcpinNode","udpNode","csv","csvNode","html","htmlNode","json","jsonNode","xml","xmlNode","yaml","yamlNode","split","splitNode","join","sort","sortNode","batch","batchNode","file","fileNode","watch","watchNode","fileString","flowData","JSON","parse","originalNodeTypeArray","map","node","type","uniqleNodeTypeArray","Set","nodeArray","forEach","hasOwnProperty","push","console","info"],"mappings":"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"}